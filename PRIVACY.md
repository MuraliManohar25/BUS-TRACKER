# Privacy & Security Documentation

## Privacy-First Design Principles

This system is designed with privacy as a core principle. No personal information is collected, stored, or exposed.

## Data Collection

### What We Collect
- **Anonymous Session IDs**: Generated by Firebase Anonymous Authentication
- **GPS Coordinates**: Only when user actively enables beacon
- **Timestamp Data**: For location updates and session management
- **Device Information**: FCM token for push notifications (optional)

### What We DON'T Collect
- ❌ Personal names or identities
- ❌ Email addresses or phone numbers
- ❌ Student IDs or enrollment information
- ❌ Device identifiers beyond session
- ❌ Location history beyond active session
- ❌ Any personally identifiable information (PII)

## Data Storage

### Firestore Collections

#### Sessions Collection
- **Purpose**: Track active beacon sessions
- **Data Stored**: 
  - Anonymous user ID (Firebase UID)
  - Bus identifier
  - Current location (last 10 updates only)
  - Active status
  - Timestamps
- **Retention**: Deleted after 2 hours of inactivity
- **Access**: User can only access their own session

#### Buses Collection
- **Purpose**: Store aggregated bus locations
- **Data Stored**:
  - Aggregated GPS coordinates
  - Beacon count (number of active beacons)
  - Speed and ETAs
- **Privacy**: No individual user data, only aggregated location
- **Access**: Public read, functions-only write

#### User Preferences Collection
- **Purpose**: Store user settings
- **Data Stored**:
  - Selected stop for notifications
  - FCM token (optional)
- **Access**: User can only access their own preferences

## Data Processing

### Location Aggregation
1. Multiple beacon locations are aggregated using weighted average
2. Individual locations are never exposed
3. Only aggregated bus location is stored
4. Individual session data is kept separate

### Anonymization
- All user identifiers are anonymous Firebase UIDs
- No correlation with real identities possible
- Session data cannot be traced back to individuals
- Location data is immediately aggregated

## Data Retention

### Active Sessions
- Stored while beacon is active
- Automatically deleted when user stops beacon
- Cleaned up after 2 hours of inactivity

### Bus Locations
- Current location only (no history)
- Updated in real-time
- No historical tracking

### User Preferences
- Stored until user deletes account
- Can be cleared by user at any time

## User Control

### Opt-In/Opt-Out
- **Beacon Sharing**: Completely optional, one-tap toggle
- **Location Access**: Requires explicit permission
- **Notifications**: Opt-in only
- **Data Deletion**: User can stop beacon at any time

### Data Access
- Users can view their own session data
- No personal data to export
- Anonymous by design

## Security Measures

### Authentication
- Firebase Anonymous Authentication
- No password or credentials required
- Session-based access tokens
- Automatic token refresh

### Authorization
- Firestore Security Rules enforce access control
- Users can only read/write their own sessions
- Bus locations are public read (aggregated data)
- Admin data requires authentication

### Data Encryption
- All data encrypted in transit (HTTPS/TLS)
- All data encrypted at rest (Firestore)
- No plaintext data transmission

### Network Security
- All API calls use HTTPS
- Firebase SDK handles security
- No third-party data sharing
- No analytics or tracking scripts

## Compliance

### GDPR Compliance
- ✅ No personal data collected
- ✅ Anonymous by design
- ✅ User control over data
- ✅ Data minimization
- ✅ Purpose limitation

### FERPA Compliance (Educational)
- ✅ No student records
- ✅ No educational data
- ✅ Anonymous participation
- ✅ Optional participation

## Third-Party Services

### Firebase Services
- **Firestore**: Database (encrypted)
- **Authentication**: Anonymous auth only
- **Cloud Functions**: Server-side processing
- **FCM**: Push notifications (optional)

### Google Maps API
- **Purpose**: Map visualization only
- **Data**: No location data sent to Google
- **Privacy**: Subject to Google's privacy policy

## Battery & Performance Privacy

### Location Tracking
- Only active when user enables beacon
- Stops immediately when user disables
- No background tracking
- No location history stored

### Battery Optimization
- Adaptive intervals reduce battery usage
- No unnecessary background processes
- Efficient GPS usage
- User control over tracking

## Transparency

### Open Source
- Code available for review
- Architecture documented
- Security rules visible
- No hidden data collection

### User Awareness
- Clear privacy information
- Explicit permission requests
- Transparent data usage
- No surprise data collection

## Incident Response

### Data Breach
- Immediate notification if breach occurs
- Session data is anonymous (limited impact)
- No personal data to compromise
- Automatic session expiration

### Security Updates
- Regular dependency updates
- Security patches applied promptly
- Monitoring for vulnerabilities
- Best practices followed

## Contact & Questions

For privacy concerns or questions:
- Review this documentation
- Check code repository
- Contact system administrators
- Report issues via GitHub

## Privacy Policy Summary

**In Simple Terms:**
- We don't know who you are
- We don't store your name or identity
- Location is only shared when you enable beacon
- Your location is mixed with others (aggregated)
- You can stop sharing anytime
- Data is deleted automatically
- Everything is anonymous

**Your Privacy is Protected by Design.**

